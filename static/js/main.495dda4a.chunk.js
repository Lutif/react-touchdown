(this.webpackJsonptouchdown=this.webpackJsonptouchdown||[]).push([[0],{291:function(e,t,n){"use strict";n.r(t);var a=n(309),r=n(1),c=n(74),s=n.n(c),o=n(310),i=n(156),l=n(20),u=n(15),d=n.n(u),j=n(27),b=n(307),h=n(308),g=n(293),O=n(160),p=n(54),x=n(301),m=n(302),f=n(3),v=function(e){var t=e.children,n=e.variant,a=void 0===n?"regular":n;return Object(f.jsx)(x.a,{textAlign:"center",backgroundColor:"grey",fontSize:"xl",children:Object(f.jsx)(m.a,{minH:"100vh",p:3,children:Object(f.jsx)(x.a,{mx:"auto",maxW:"regular"===a?"800px":"400px",w:"100%",alignItems:"center",alignSelf:"center",p:"regular"===a?"145px":"50px",backgroundColor:"white",borderRadius:15,children:t})})})},w=n(18),y=n(6),C=n(90),k=n(65),S=n(303),I=n(304),L=n(311),E=n(305),N=function(e){e.size;var t=e.Icon,n=Object(C.a)(e,["size","Icon"]),a=Object(p.b)(n),r=Object(y.a)(a,2),c=r[0],s=r[1].error;return Object(f.jsxs)(k.a,{mb:2,minHeight:"67px",isInvalid:!!s,children:[Object(f.jsxs)(S.a,{children:[Object(f.jsx)(I.a,{pointerEvents:"none",children:Object(f.jsx)(t,{color:"gray.300"})}),Object(f.jsx)(L.a,Object(w.a)(Object(w.a)(Object(w.a)({},c),n),{},{id:c.name,placeholder:n.placeholder||c.name,maxWidth:550,variant:"filled"}))]}),Object(f.jsx)(E.a,{noOfLines:1,children:s})]})},R=(n(294),n(306),n(107),n(13)),W=function(e){var t=e.component,n=Object(C.a)(e,["component"]),a=Object(l.c)((function(e){return e.auth})).isLoggedIn;return Object(f.jsx)(R.b,Object(w.a)(Object(w.a)({},n),{},{render:function(e){return a?Object(f.jsx)(t,Object(w.a)({},e)):Object(f.jsx)(R.a,{to:"/"})}}))},T=n(28),q=T.a().shape({firstName:T.b().required("Enter your name.").label("First Name"),lastName:T.b().required("Enter your last name.").label("Last Name"),companyName:T.b().required("Enter your company name.").label("Last Name"),email:T.b().email().required("Email is required.").label("Email"),password:T.b().required("Enter your password").min(8).label("Password"),passwordRepeat:T.b().required("Enter your password again").min(8).label("Password").test("password-match","Confirm password must match",(function(e){return this.parent.password===e}))}),z=T.a().shape({email:T.b().email().required("Email is required.").label("Email"),password:T.b().required("Enter your password").min(8).label("Password")}),P=n(154),B=n.n(P).a.create({baseURL:"https://api.designgrid.co/api",withCredentials:!0}),F=n(62),U="AUTH_SUCCESS",A="LOGOUT",D=function(e){return{payload:e,type:U}},H=function(){return{type:A}},J={user:null,isLoggedIn:!1},V=Object(F.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(w.a)(Object(w.a)({},e),{},{user:t.payload,isLoggedIn:!0});case A:return Object(w.a)(Object(w.a)({},e),{},{user:null,isLoggedIn:!1});default:return Object(w.a)({},e)}}}),G=Object(F.c)(V),M=n(33),$=n(55),_=n(64),K=function(){var e=function(){var e=Object(l.b)(),t=Object(r.useState)({success:!1,loading:!0,status:null}),n=Object(y.a)(t,2),a=n[0],c=n[1];return{res:a,login:Object(r.useCallback)(function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({success:!1,loading:!0,status:null}),t.prev=1,t.next=4,B.post("/auth/login",n);case 4:a=t.sent,e(D(a.data)),c({success:!0,loading:!1,status:200}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c({success:!1,loading:!1,status:t.t0.response.status}),e(H());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),[])}}(),t=e.res,n=e.login,a=Object(R.g)(),c=Object(l.c)((function(e){return e.auth}));return Object(r.useEffect)((function(){c.isLoggedIn&&a.push("/home")}),[c.isLoggedIn]),Object(f.jsxs)(v,{variant:"regular",children:[401===t.status&&Object(f.jsx)(b.a,{mb:10,color:"red",children:"Wrong credential"}),Object(f.jsx)(p.a,{initialValues:{username:"",password:""},onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:z,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.handleSubmit,n=e.isSubmitting;return Object(f.jsxs)("form",{children:[Object(f.jsx)(h.a,{mb:10,children:"Login"}),Object(f.jsx)(N,{name:"email",placeholder:"Email address",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:$.a})}}),Object(f.jsx)(N,{type:"password",name:"password",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:_.a})}}),Object(f.jsx)(O.a,{backgroundColor:"#22272c",textColor:"white",variant:"solid",loadingText:"Please wait...",isLoading:n,minWidth:"300px",mt:"30",size:"lg",onClick:function(){return t()},children:"Login"})]})}}),Object(f.jsx)(M.b,{to:"/register",children:Object(f.jsx)(b.a,{mt:4,fontSize:"14px",children:"Don't have an account? Sign Up"})})]})},Q=n(312),X=n(155),Y=function(){var e=function(){var e=Object(r.useState)({success:!1,loading:!0,status:null}),t=Object(y.a)(e,2),n=t[0],a=t[1];return{res:n,register:Object(r.useCallback)(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({success:!1,loading:!0,status:null}),e.prev=1,e.next=4,B.post("/auth/register",t);case 4:e.sent.status,a({success:!0,loading:!1,status:200}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({success:!1,loading:!1,status:e.t0.response.status});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[])}}(),t=e.res,n=e.register,a=Object(R.g)();return Object(r.useEffect)((function(){t.success&&a.push("/login")}),[t]),Object(f.jsxs)(v,{variant:"regular",children:[409===t.status&&Object(f.jsxs)(b.a,{mb:10,color:"red",children:["Account already exists for this email,",Object(f.jsx)(M.b,{to:"/login",children:" Please login."})]}),Object(f.jsx)(p.a,{initialValues:{firstName:"",lastName:"",companyName:"",email:"",password:"",passwordRepeat:""},onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:q,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.handleSubmit,n=e.isSubmitting;return Object(f.jsxs)("form",{children:[Object(f.jsx)(h.a,{mb:10,children:"Sign Up"}),Object(f.jsxs)(Q.a,{children:[Object(f.jsx)(N,{name:"firstName",placeholder:"First Name",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:$.b})}}),Object(f.jsx)(N,{name:"lastName",placeholder:"Last Name",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:$.b})}})]}),Object(f.jsx)(N,{name:"companyName",placeholder:"Company Name",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:X.a})}}),Object(f.jsx)(N,{name:"email",placeholder:"Email address",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:$.a})}}),Object(f.jsxs)(Q.a,{children:[Object(f.jsx)(N,{name:"password",placeholder:"Password",type:"password",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:_.a})}}),Object(f.jsx)(N,{name:"passwordRepeat",placeholder:"Repeat Password",type:"password",Icon:function(){return Object(f.jsx)(g.a,{color:"gray.400",as:_.a})}})]}),Object(f.jsx)(O.a,{backgroundColor:"#22272c",textColor:"white",variant:"solid",loadingText:"Register...",isLoading:n,minWidth:"300px",mt:"30",size:"lg",onClick:function(){return t()},children:"Register"})]})}}),Object(f.jsx)(M.b,{to:"/login",children:Object(f.jsx)(b.a,{mt:4,fontSize:"14px",children:"Already Registered? login"})})]})},Z=function(){var e=Object(R.g)();return Object(f.jsx)(x.a,{backgroundColor:"white",children:Object(f.jsxs)(Q.b,{children:[Object(f.jsx)(h.a,{children:"Welcome to TouchDown"}),Object(f.jsxs)(Q.a,{mt:30,children:[Object(f.jsx)(O.a,{backgroundColor:"#22272c",textColor:"white",variant:"solid",loadingText:"Register...",minWidth:"300px",size:"lg",onClick:function(){return e.push("/register")},children:"Register"}),Object(f.jsx)(O.a,{backgroundColor:"#22272c",textColor:"white",variant:"solid",loadingText:"Register...",minWidth:"300px",size:"lg",onClick:function(){return e.push("/login")},children:"Login"})]})]})})},ee=function(){var e,t=function(){var e=Object(l.b)(),t=Object(r.useState)({success:!1,loading:!0,status:null}),n=Object(y.a)(t,2),a=n[0],c=n[1];return{res:a,logout:Object(r.useCallback)(Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({success:!1,loading:!0,status:null}),t.prev=1,t.next=4,B.delete("/auth/logout");case 4:t.sent,e(H()),c({success:!0,loading:!1,status:200}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e(H()),c({success:!1,loading:!1,status:t.t0.response.status});case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),[])}}().logout,n=Object(l.c)((function(e){return e.auth})),a=Object(R.g)();return Object(r.useEffect)((function(){n.isLoggedIn||a.push("/")}),[n.isLoggedIn]),console.log("hello",null===n||void 0===n?void 0:n.user),Object(f.jsx)(x.a,{backgroundColor:"white",children:Object(f.jsxs)(Q.b,{children:[Object(f.jsxs)(h.a,{children:["Welcome to TouchDown ",null===(e=n.user)||void 0===e?void 0:e.fullName]}),Object(f.jsx)(b.a,{children:"Still working on homepage thank you for registering"}),Object(f.jsx)(b.a,{children:"Bored? "}),Object(f.jsx)(O.a,{backgroundColor:"#22272c",textColor:"white",variant:"solid",loadingText:"Register...",minWidth:"300px",mt:"30",size:"lg",onClick:function(){return t()},children:"Logout"})]})})},te=function(){return Object(f.jsx)(M.a,{children:Object(f.jsx)(R.d,{children:Object(f.jsx)(l.a,{store:G,children:Object(f.jsxs)(o.a,{theme:i.theme,children:[Object(f.jsx)(R.b,{exact:!0,path:"/login",children:Object(f.jsx)(K,{})}),Object(f.jsx)(R.b,{exact:!0,path:"/",children:Object(f.jsx)(Z,{})}),Object(f.jsx)(R.b,{exact:!0,path:"/register",children:Object(f.jsx)(Y,{})}),Object(f.jsx)(W,{exact:!0,path:"/home",children:Object(f.jsx)(ee,{})})]})})})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(f.jsxs)(r.StrictMode,{children:[Object(f.jsx)(a.a,{}),Object(f.jsx)(te,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ne()}},[[291,1,2]]]);
//# sourceMappingURL=main.495dda4a.chunk.js.map